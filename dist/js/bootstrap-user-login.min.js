/*! bootstrap-user-login 2015-09-11 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):window.jQuery&&a(window.jQuery)}(function(a){var b=a(".user-menu"),c=a(".user-sign"),d=null,e=function(c,e){this.form=c,this.opt=e,c.on("submit",a.proxy(this.submit,this)),this.url=c.attr("action"),a("li:last",b).on("click",a.proxy(this.doSignout,this)),null==d&&a.get("/api/auth",a.proxy(this.signin,this))};e.prototype={constructor:e,signin:function(e){d=e.data,a(".user-name",this.signinPanel).text(d.name),b.removeClass("hidden"),c.addClass("hidden"),this.form.trigger("signin",[e])},submit:function(b){var c=a(b.target);return a.ajax(a.extend({method:c.data("method")||"POST",url:this.url,data:c.serialize(),success:a.proxy(this.success,this),skipAjaxControl:!!c.data().skipAjaxControl},this.opt)),!1},doSignout:function(b){return b.preventDefault(),a.get("/api/auth/signout",a.proxy(this.signout,this)),!1},signout:function(){b.addClass("hidden"),c.removeClass("hidden"),d=null},success:function(b){-1!==this.url.indexOf("signin")?window.location.href="/":-1!==this.url.indexOf("forgot")?a(".alert-success").removeClass("hidden"):-1!==this.url.indexOf("verify")&&1===b.code}},a.fn.userlogin=function(b){var c=arguments;return this.each(function(){var d=a(this),f=d.data("userlogin"),g="object"==typeof b?b:{};f||"string"==typeof b?"string"==typeof b&&f[b].apply(f,Array.prototype.slice.call(c,1)):d.data("userlogin",new e(d,g))})};var f=a('<div class="user-message hidden"><div><div class="alert alert-danger .alert-dismissible user-inner-message"><button type="button" class="close" aria-label="Close">&times;</button><p></p></div></div></div>');a.ajaxControl=function(a){var b=!1;return"string"==typeof a?b=!0:void 0===a.code?b=!0:1===a.code?(b=!0,g("done","alert-success"),setTimeout(function(){f.addClass("hidden")},1500)):0===a.code?f.addClass("hidden"):g(a.code,"alert-danger"),b},a(".close",f).on("click",function(){f.addClass("hidden")}),a("body").append(f);var g=function(b,c){var d=null;a.userMsg&&(d=a.userMsg[b]),a("p",f).html(d||b);var e=a(".alert",f);e.removeClass("alert-success"),e.removeClass("alert-danger"),e.removeClass("alert-info"),e.addClass(c||"alert-info"),f.removeClass("hidden")};a(document).ajaxError(function(a,b,c,d){g(d,"alert-danger")}).ajaxSend(function(){g("loading","alert-info")})});